---
import BaseLayout from "./BaseLayout.astro";

interface Props {
  title: string;
}

const { title } = Astro.props;
const currentPath = Astro.url.pathname;

const navItems = [
  { href: "/regia", label: "Overview", exact: true },
  { href: "/regia/users", label: "Utenti" },
  { href: "/regia/businesses", label: "Business" },
  { href: "/regia/scraping", label: "Scraping" },
  { href: "/regia/ai-config", label: "AI Config" },
];

function isActive(href: string, exact = false) {
  if (exact) return currentPath === href;
  return currentPath.startsWith(href);
}
---

<BaseLayout title={`Regia - ${title}`}>
  <div class="flex min-h-screen">
    <aside class="w-64 border-r border-gray-200 bg-gray-900 p-6 text-white">
      <a href="/regia" class="mb-2 block text-xl font-bold">Mindigger MK2</a>
      <span class="mb-8 block text-xs uppercase tracking-wider text-gray-400">Regia</span>
      <nav class="space-y-1">
        {navItems.map((item) => (
          <a
            href={item.href}
            class:list={[
              "block rounded-lg px-3 py-2 text-sm font-medium",
              isActive(item.href, item.exact)
                ? "bg-gray-700 text-white"
                : "text-gray-300 hover:bg-gray-800 hover:text-white",
            ]}
          >
            {item.label}
          </a>
        ))}
      </nav>

      <div class="mt-auto border-t border-gray-700 pt-4">
        <a
          href="/analytics"
          class="block rounded-lg px-3 py-2 text-xs text-gray-400 hover:bg-gray-800 hover:text-white"
        >
          &larr; Torna alla Dashboard
        </a>
      </div>
    </aside>
    <main class="flex-1 p-8">
      <slot />
    </main>
  </div>
</BaseLayout>
